
project.afterEvaluate {

  if (project.tasks.findByName('cleanEclipseFactorypath')) {

	  project.rootProject.tasks['configureBuildship'].dependsOn(
	  
	    project.tasks['cleanEclipseFactorypath'],
	    project.tasks['cleanEclipseClasspath'],
	    project.tasks['cleanEclipseJdtApt'],
	    project.tasks['cleanEclipseJdt'],
	    
	    project.tasks['eclipseFactorypath'],
	    project.tasks['eclipseJdt'],
	    project.tasks['eclipseJdtApt']
	    
	  )
  
  }  
  else if (project.tasks.findByName('eclipseFactorypath')) {

	project.rootProject.tasks['configureBuildship'].dependsOn(
	    
	    project.tasks['eclipseFactorypath'],
	    project.tasks['eclipseJdt'],
	    project.tasks['eclipseJdtApt']
	    
	)

  
  }  
  
  //    dependsOn gradle.includedBuild('my-app').task(':run')
  

  project.eclipse {
    project.name = "zzz:${project.name}"
    project.natures << 'org.eclipse.buildship.core.gradleprojectnature'
  }

}

